Теги в маркеті
===============

Додавання тегів
-----------------

При додаванні нового тега обов'язковими є поля:
* `name` - назва тегу
* `name_en` - переклад назви

Поле `id` можна додавати опціонально. Головне, щоб воно було формату alphanumeric.

```doctest
POST /tags
{
   "data": {
       "id": "NT1",
       "name": "Новий",
       "name_en": "New"
   }
}


201 Created
{
   "data": {
       "id": "NT1",
       "name": "Новий",
       "name_en": "New"
   }
}

```

Автоматична генерація id:

```doctest
POST /tags
{
   "data": {
       "name": "Хіт продаж",
       "name_en": "Hit sale"
   }
}


201 Created
{
   "data": {
       "id": "hit-sale",
       "name": "Хіт продажу",
       "name_en": "Hit sale"
   }
}

```


Отримання тегів
---------------

```doctest
GET /tags
{}


200 OK
{
   "data": [
       {
           "id": "NT1",
           "name": "Новий",
           "name_en": "New tag"
       },
       {
           "id": "hit-sale",
           "name": "Хіт продажу",
           "name_en": "Hit sale"
       },
   ]
}

```

Отримання тегу по id:

```doctest
GET /tags/hit-sale
{}


200 OK
{
   "data": {
       "id": "hit-sale",
       "name": "Хіт продажу",
       "name_en": "Hit sale"
   }
}

```

Редагування тегів
-----------------
```doctest
PATCH /tags/NT1
{
   "data": {
       "name_en": "New tag"
   }
}


200 OK
{
   "data": {
       "id": "NT1",
       "name": "Новий",
       "name_en": "New tag"
   }
}

```

Видалення тегу 
------------------

Якщо тег непотрібний чи вже неактуальний, то є можливість "м'якого" видалення за допомогою зміни поля `active`:

```doctest
PATCH /tags/NT1
{
    "data": {
       "active": False
   }
}


200 OK
{
   "data": {
       "id": "NT1",
       "name": "Новий",
       "name_en": "New tag",
       "active": False
   }
}

```

Таким чином на фронтенді можна не показувати вже неактивні теги.
При цьому не зламаються інтерфейси а відображенні категорій/профілів з неактуальним тегом, 
так як нема повного видалення з БД назви тегу і перекладів. 

Використаня тегів
==================

Варіант №1:
-----------

```doctest
PATCH /categories/15240000-107114-40996564
{
    "data": {
       "tags": ["NT1", "hit-sale"]
   }
}


200 OK
{
   "data": {
       "id": "15240000-107114-40996564",
       "classification": {
            "scheme": "ДК021",
            "description": "Рибні консерви та інші рибні страви і пресерви",
            "id": "15240000-2"
       },
       "title": "Консерви рибні",
       ...
       "tags": ["NT1", "hit-sale"]
   }
}

```

Плюси:
* Легко оновлювати переклади —> зміни в одному місці відобразяться всюди.
* Легке масштабування —> Можна додати додаткові поля в тег (опис, категорія, активність тощо), не змінюючи всі об’єкти.

Мінуси:
* Додаткові запити —> Щоб отримати повні дані про теги (наприклад, перекладені назви), потрібно робити додатковий запит

Як вирішення цієї проблеми: можна кешувати теги на клієнті.

Варіант №2:
-----------

```doctest
PATCH /categories/15240000-107114-40996564
{
    "data": {
       "tags": ["NT1", "hit-sale"]
   }
}


200 OK
{
   "data": {
       "id": "15240000-107114-40996564",
       "classification": {
            "scheme": "ДК021",
            "description": "Рибні консерви та інші рибні страви і пресерви",
            "id": "15240000-2"
       },
       "title": "Консерви рибні",
       ...
       "tags": [
            {
               "id": "NT1",
               "name": "Новий",
               "name_en": "New tag"
            },
            {
               "id": "hit-sale",
               "name": "Хіт продажу",
               "name_en": "Hit sale"
            }
       ]
   }
}

```

Плюси:
* Повністю автономний об'єкт —> Вся інформація про тег уже тут — немає потреби робити додаткові запити, щоб показати назву чи переклад. 
* Простота використання на клієнті —> Легко відразу відобразити інформацію, немає необхідності додатково звіряти id з іншими джерелами.


Мінуси:
* Дублювання даних —> Кожен об'єкт, що містить цей тег, несе копію даних — ризик, що при зміні тегу не всі копії оновляться.
* Ускладнення підтримки —> Потрібно додатково контролювати синхронізацію даних тегів у різних об'єктах.